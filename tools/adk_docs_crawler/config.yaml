# ADK Docs Crawler Configuration for Hustle
# Production-grade pipeline for crawling and indexing Google ADK documentation

# GCP Configuration (load from environment variables)
gcp:
  project_id: "${GCP_PROJECT_ID}"
  bucket_name: "${HUSTLE_DOCS_BUCKET}"
  service_account: "${CRAWLER_SA_EMAIL}"

# Crawler Settings
crawler:
  base_url: "https://google.github.io/adk-docs/"
  allowed_domains:
    - "google.github.io"
  allowed_paths:
    - "/adk-docs/"
  user_agent: "Hustle-ADK-Crawler/1.0 (+https://hustlestats.io)"
  rate_limit_seconds: 0.5  # 500ms between requests
  max_concurrent_requests: 3
  timeout_seconds: 30
  respect_robots_txt: true
  max_pages: 1000  # Safety limit

# Content Extraction
extraction:
  preserve_code_blocks: true
  extract_headings: true
  max_heading_levels: 6
  strip_navigation: true
  strip_footer: true
  min_content_length: 100  # Minimum characters to consider valid content

# RAG Chunking
chunking:
  strategy: "heading_based"  # or "token_based"
  max_chunk_tokens: 1500
  overlap_tokens: 150
  split_long_sections: true
  preserve_code_blocks_intact: true
  min_chunk_tokens: 100

# GCS Upload Paths
gcs_paths:
  raw_docs: "adk-docs/raw/docs.jsonl"
  chunks: "adk-docs/chunks/chunks.jsonl"
  manifests: "adk-docs/manifests/"
  logs: "adk-docs/logs/"

# Logging
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  log_to_file: true
  log_file: "tmp/adk_docs_crawler.log"

# Output Paths (local)
output:
  tmp_dir: "tmp/adk_crawler"
  manifest_file: "tmp/adk_crawler/manifest.json"
  raw_docs_file: "tmp/adk_crawler/docs.jsonl"
  chunks_file: "tmp/adk_crawler/chunks.jsonl"
